name: Lint and Test

on: [push, pull_request]

jobs:
  verify:
    name: Run Lint and Tests
    runs-on: ubuntu-latest
    #container:
    #  image: lucasalt/act_base:latest    
    # Service containers to run with `runner-job`
    services:
      fhir-validator-service:
        image: infernocommunity/fhir-validator-service
        environment:
          DISABLE_TX: 'false'
        volumes:
          - ./igs:/home/igs
        ports:
          - 4567:4567
     
    steps:
    - uses: actions/checkout@v1

    - uses: actions/setup-node@v1
      with:
        node-version: '14.x'

    - run: npm install

    - run: npm run lint

    - run: npm run test
      env:
        CI: true